# Crypto Kraken Global - Paper Trading Configuration
# Scope: paper_alpaca_swing_us
# Use case: Paper simulation with ML training during downtime

# ============================================================================
# EXCHANGE & UNIVERSE
# ============================================================================
EXCHANGE = "kraken"
SCOPE = "paper_kraken_crypto_global"
ENVIRONMENT = "paper"

# Universe symbols (canonical format)
CRYPTO_UNIVERSE = ["BTC", "ETH", "SOL"]

# Universe filters
UNIVERSE_MIN_VOLUME_USD = 1000000
UNIVERSE_MAX_SPREAD_BPS = 50

# ============================================================================
# PAPER SIMULATION
# ============================================================================
PAPER_STARTING_BALANCE = 10000.0  # USD

# Slippage & fees
PAPER_MAKER_FEE = 0.0016  # 0.16%
PAPER_TAKER_FEE = 0.0026  # 0.26%
PAPER_SLIPPAGE_BPS = 5.0  # 5 basis points

# Perp funding (if enabled)
PAPER_ENABLE_FUNDING_COSTS = False
PAPER_FUNDING_RATE = 0.0001  # 0.01% per 8h

# Deterministic testing
PAPER_RANDOM_SEED = None  # Use None for random, or seed value for determinism

# ============================================================================
# TRADING SCHEDULE & DOWNTIME
# ============================================================================
# Crypto is 24/7, but trading pauses during downtime for ML training
TRADING_ENABLED = True

# Downtime window (UTC) when trading pauses and ML training runs
DOWNTIME_START_UTC = "03:00"  # 3 AM UTC
DOWNTIME_END_UTC = "05:00"    # 5 AM UTC

# Max time training can take (must finish before downtime ends)
MAX_TRAINING_TIME_MINUTES = 100

# Trading loop interval (seconds)
TRADING_LOOP_INTERVAL = 300  # 5 minutes

# ============================================================================
# STRATEGY CONFIGURATION
# ============================================================================
# Maximum concurrent strategies
MAX_CONCURRENT_STRATEGIES = 2

# Default capital allocation per strategy
DEFAULT_STRATEGY_ALLOCATION = 0.5

# ============================================================================
# ML PIPELINE
# ============================================================================
# ML is disabled during trading hours, runs only during downtime
ML_TRAINING_ENABLED = True
ML_TRAINING_ONLY_IN_DOWNTIME = True

# Model validation gates
ML_MIN_OOS_SHARPE = 0.5
ML_MAX_DRAWDOWN = 0.15
ML_MAX_TAIL_LOSS = 0.05
ML_MAX_ANNUAL_TURNOVER = 2.0

# Shadow mode (evaluate candidate without trading)
ML_SHADOW_MODE_ENABLED = False

# ============================================================================
# MODEL LIFECYCLE & APPROVAL
# ============================================================================
# Candidates/ (generated by training) → validations/ → approved/ (live reads)
MODEL_AUTO_APPROVE = False  # Never auto-approve; always manual promotion
REQUIRE_VALIDATION_PASS = True  # Promotion requires PASS validation
REQUIRE_EXPLICIT_APPROVAL = True  # Require "yes-promote" confirmation

# ============================================================================
# RISK MANAGEMENT
# ============================================================================
# Per-trade risk (% of equity)
RISK_PER_TRADE = 0.02  # 2% of equity

# Per-symbol max exposure
MAX_RISK_PER_SYMBOL = 0.05  # 5%

# Portfolio heat limit
MAX_PORTFOLIO_HEAT = 0.08  # 8% total at-risk

# Daily limits
MAX_TRADES_PER_DAY = 20
MAX_CONSECUTIVE_LOSSES = 3
DAILY_LOSS_LIMIT = 0.02  # -2%

# Position sizing
CONFIDENCE_RISK_MULTIPLIER = {
    1: 0.5,
    2: 0.75,
    3: 1.0,
    4: 1.25,
    5: 1.5,
}

# ============================================================================
# ARTIFACT STORAGE (ISOLATED FROM SWING)
# ============================================================================
CRYPTO_ARTIFACT_ROOT = "/data/artifacts/crypto/kraken_global"
CRYPTO_LOG_ROOT = "/data/logs/crypto/kraken_global"
CRYPTO_DATASET_ROOT = "/data/datasets/crypto/kraken_global"
CRYPTO_LEDGER_ROOT = "/data/ledger/crypto/kraken_global"

# ============================================================================
# LOGGING
# ============================================================================
LOG_LEVEL = "INFO"
LOG_FORMAT = "%(asctime)s | %(levelname)-8s | %(name)s | %(message)s"
